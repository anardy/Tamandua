!function(a){var b=a.sammy("#main",function(){this.use("Mustache","html");var b={tipo:"",msg:""};this.helpers({getTipoFuncionario:function(){var a=new Sammy.Store.SessionStorage("funcionario");return a.get("tipo")},getCpfFuncionario:function(){var a=new Sammy.Store.SessionStorage("funcionario");return a.get("cpf")}}),this.get("#/",function(a){a.app.swap(""),this.msg=b.msg,a.render("templates/login.html").appendTo(a.$element())}),this.post("#/autentica",function(c){if(a.ajaxSetup({async:!1}),a.post("http://localhost:8080/TamanduaWS/api/autentica",a("form").serialize(),function(a){b=a}).fail(function(c){b=a.parseJSON(c.responseText)}),a.ajaxSetup({async:!0}),"erro"===b.tipo)this.redirect("#/");else{if("Correntista"!==b.msg){var d=new Sammy.Store.SessionStorage("funcionario");d.set("cpf",a("[name='cpf']").val()),d.set("tipo",b.msg),b.msg="Funcionario"}this.redirect("#/login"+b.msg)}}),this.post("#/login",function(c){if(a.ajaxSetup({async:!1}),a.post("http://localhost:8080/TamanduaWS/api/autentica/cliente",a("form").serialize(),function(a){b=a}).fail(function(c){b=a.parseJSON(c.responseText)}),a.ajaxSetup({async:!0}),"erro"===b.tipo)this.redirect("#/loginCorrentista");else{var d=new Sammy.Store.SessionStorage("conta");d.set("nroconta",a("[name='nroconta']").val()),window.location.replace("http://localhost/Tamandua/src/cliente/")}}),this.post("#/loginFuncionario",function(c){a.ajaxSetup({async:!1}),a.post("http://localhost:8080/TamanduaWS/api/autentica/funcionario",a("form").serialize(),function(a){b=a}).fail(function(c){b=a.parseJSON(c.responseText)}),a.ajaxSetup({async:!0}),"erro"===b.tipo?this.redirect("#/loginFuncionario"):window.location.replace("http://localhost/Tamandua/src/funcionario/")}),this.get("#/loginCorrentista",function(a){this.msg=b.msg,this.partial("templates/loginCorrentista.html")}),this.get("#/loginFuncionario",function(a){this.msg=b.msg,this.cpf=this.getCpfFuncionario(),this.partial("templates/loginFuncionario.html")})});a(function(){b.run("#/")})}(jQuery);